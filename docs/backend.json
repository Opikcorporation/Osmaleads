{
  "entities": {
    "Lead": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Lead",
      "type": "object",
      "description": "Represents a lead in the system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Lead entity."
        },
        "name": {
          "type": "string",
          "description": "The full name of the lead or company."
        },
        "company": {
          "type": "string",
          "description": "The company name of the lead."
        },
        "email": {
          "type": "string",
          "description": "The email address of the lead."
        },
        "phone": {
          "type": "string",
          "description": "The phone number of the lead."
        },
        "username": {
          "type": "string",
          "description": "The username or social media handle of the lead."
        },
        "tier": {
          "type": ["string", "null"],
          "description": "The quality tier of the lead.",
          "enum": [
            "Bas de gamme",
            "Moyenne gamme",
            "Haut de gamme"
          ]
        },
        "score": {
          "type": ["number", "null"],
          "description": "A numerical score representing the lead's quality."
        },
        "leadData": {
          "type": "string",
          "description": "Raw lead data (e.g., JSON stringified CSV row)."
        },
        "status": {
          "type": "string",
          "description": "Current status of the lead (e.g., Qualified, Not Qualified).",
          "format": "string"
        },
        "assignedCollaboratorId": {
          "type": "string",
          "description": "Reference to Collaborator assigned to this lead. (Relationship: Collaborator 1:N Lead)"
        }
      },
      "required": [
        "id",
        "name",
        "leadData",
        "status"
      ]
    },
    "Collaborator": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Collaborator",
      "type": "object",
      "description": "Represents a collaborator (user) in the system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Collaborator entity, matches Firebase Auth UID."
        },
        "name": {
          "type": "string",
          "description": "The full name of the collaborator."
        },
        "username": {
          "type": "string",
          "description": "The unique username for the collaborator."
        },
        "email": {
          "type": "string",
          "description": "Collaborator's email address.",
          "format": "email"
        },
        "role": {
          "type": "string",
          "description": "The role of the user, can be 'admin' or 'collaborator'.",
          "enum": [
            "admin",
            "collaborator"
          ]
        },
        "avatarUrl": {
          "type": "string",
          "description": "URL to the collaborator's profile picture.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "name",
        "username",
        "email",
        "role",
        "avatarUrl"
      ]
    },
    "Note": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Note",
      "type": "object",
      "description": "Represents a note added to a lead.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Note entity."
        },
        "leadId": {
          "type": "string",
          "description": "Reference to the Lead this note belongs to. (Relationship: Lead 1:N Note)"
        },
        "collaboratorId": {
          "type": "string",
          "description": "Reference to the Collaborator who created this note. (Relationship: Collaborator 1:N Note)"
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of when the note was created.",
          "format": "date-time"
        },
        "content": {
          "type": "string",
          "description": "Content of the note."
        }
      },
      "required": [
        "id",
        "leadId",
        "collaboratorId",
        "timestamp",
        "content"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/collaborators/{collaboratorId}",
        "definition": {
          "entityName": "Collaborator",
          "schema": {
            "$ref": "#/backend/entities/Collaborator"
          },
          "description": "Stores collaborator profiles. A user can create their own profile upon signup and manage their own data. Admins have broader access."
        }
      },
      {
        "path": "/leads/{leadId}",
        "definition": {
          "entityName": "Lead",
          "schema": {
            "$ref": "#/backend/entities/Lead"
          },
          "description": "Stores lead data. Only Admins can create leads. Assigned collaborators can update/delete."
        }
      },
      {
        "path": "/leads/{leadId}/notes/{noteId}",
        "definition": {
          "entityName": "Note",
          "schema": {
            "$ref": "#/backend/entities/Note"
          },
          "description": "Stores notes for each lead. The assigned collaborator or admins can manage notes."
        }
      }
    ]
  }
}
