{
  "entities": {
    "Lead": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Lead",
      "type": "object",
      "description": "Represents a lead in the system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Lead entity."
        },
        "leadData": {
          "type": "string",
          "description": "Raw lead data (e.g., CSV content, other document formats)."
        },
        "aiProfile": {
          "type": "string",
          "description": "AI-generated profile of the lead (structured data)."
        },
        "status": {
          "type": "string",
          "description": "Current status of the lead (e.g., Qualified, Not Qualified).",
          "format": "string"
        },
        "assignedCollaboratorId": {
          "type": "string",
          "description": "Reference to Collaborator assigned to this lead. (Relationship: Collaborator 1:N Lead)"
        }
      },
      "required": [
        "id",
        "leadData",
        "aiProfile",
        "status"
      ]
    },
    "Collaborator": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Collaborator",
      "type": "object",
      "description": "Represents a collaborator (user) in the system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Collaborator entity, matches Firebase Auth UID."
        },
        "name": {
          "type": "string",
          "description": "The full name of the collaborator."
        },
        "username": {
          "type": "string",
          "description": "The unique username for the collaborator."
        },
        "email": {
          "type": "string",
          "description": "Collaborator's email address.",
          "format": "email"
        },
        "role": {
          "type": "string",
          "description": "The role of the user, can be 'admin' or 'collaborator'.",
          "enum": [
            "admin",
            "collaborator"
          ]
        },
        "avatarUrl": {
          "type": "string",
          "description": "URL to the collaborator's profile picture.",
          "format": "uri"
        }
      },
      "required": [
        "id",
        "name",
        "username",
        "email",
        "role",
        "avatarUrl"
      ]
    },
    "Group": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Group",
      "type": "object",
      "description": "Represents a group of collaborators.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Group entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the group."
        },
        "collaboratorIds": {
          "type": "array",
          "description": "References to Collaborators within this group. (Relationship: Group 1:N Collaborator)",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "name",
        "collaboratorIds"
      ]
    },
    "Note": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Note",
      "type": "object",
      "description": "Represents a note added to a lead.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Note entity."
        },
        "leadId": {
          "type": "string",
          "description": "Reference to the Lead this note belongs to. (Relationship: Lead 1:N Note)"
        },
        "collaboratorId": {
          "type": "string",
          "description": "Reference to the Collaborator who created this note. (Relationship: Collaborator 1:N Note)"
        },
        "timestamp": {
          "type": "string",
          "description": "Timestamp of when the note was created.",
          "format": "date-time"
        },
        "content": {
          "type": "string",
          "description": "Content of the note."
        }
      },
      "required": [
        "id",
        "leadId",
        "collaboratorId",
        "timestamp",
        "content"
      ]
    },
    "DistributionSetting": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "DistributionSetting",
      "type": "object",
      "description": "Stores distribution settings for a group.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the DistributionSetting entity."
        },
        "groupId": {
          "type": "string",
          "description": "Reference to the Group this setting applies to."
        },
        "leadsPerDay": {
          "type": "number",
          "description": "Number of leads to distribute per day to this group."
        },
        "distributionTime": {
          "type": "string",
          "description": "Time of day to distribute leads (e.g., '17:00').",
          "format": "time"
        }
      },
      "required": [
        "id",
        "groupId",
        "leadsPerDay",
        "distributionTime"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/collaborators/{collaboratorId}",
        "definition": {
          "entityName": "Collaborator",
          "schema": {
            "$ref": "#/backend/entities/Collaborator"
          },
          "description": "Stores collaborator profiles. A user can create their own profile upon signup and manage their own data. Admins have broader access."
        }
      },
      {
        "path": "/groups/{groupId}",
        "definition": {
          "entityName": "Group",
          "schema": {
            "$ref": "#/backend/entities/Group"
          },
          "description": "Stores group information. Admins can create/modify groups."
        }
      },
      {
        "path": "/leads/{leadId}",
        "definition": {
          "entityName": "Lead",
          "schema": {
            "$ref": "#/backend/entities/Lead"
          },
          "description": "Stores lead data. Only Admins can create leads. Assigned collaborators can update/delete."
        }
      },
      {
        "path": "/leads/{leadId}/notes/{noteId}",
        "definition": {
          "entityName": "Note",
          "schema": {
            "$ref": "#/backend/entities/Note"
          },
          "description": "Stores notes for each lead. The assigned collaborator or admins can manage notes."
        }
      },
      {
        "path": "/distributionSettings/{settingId}",
        "definition": {
          "entityName": "DistributionSetting",
          "schema": {
            "$ref": "#/backend/entities/DistributionSetting"
          },
          "description": "Stores lead distribution settings for groups. Only admins can manage these settings."
        }
      }
    ]
  }
}
